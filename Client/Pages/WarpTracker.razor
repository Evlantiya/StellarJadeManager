@using StellarJadeManager.Client.Components.WarpImport
@page "/warp"


<PageTitleWithEmote PageTitle="История круток" ImgPath="images/emotes/Jingliu 3.png"></PageTitleWithEmote>

<MudGrid Spacing="2" Justify="Justify.Center" Style="width:80%; max-width:1280px">
    <MudItem xs="12" sm="12" md="8" lg="8">
        <BannerInfoCard
            BannerInfo="@CurrentBannerInfos.First(b => b.BannerTypeId == (int)BannerTypeEnum.EVENT)"
            ImageSrc="/Images/characters-full/1306.png">
        </BannerInfoCard>
    </MudItem>
    <MudItem xs="12" sm="12" md="4" lg="4">
        <BannerInfoCard 
            BannerInfo="@CurrentBannerInfos.First(b => b.BannerTypeId == (int)BannerTypeEnum.LIGHTCONE)"
            ImageSrc="/Images/lightcones/Light_Cone_Earthly_Escapade_Artwork.png">
        </BannerInfoCard>
    </MudItem>
    <MudItem xs="12" sm="12" md="6" lg="6">
        <BannerInfoCard 
            BannerInfo="@CurrentBannerInfos.First(b => b.BannerTypeId == (int)BannerTypeEnum.STANDART)"
            ImageSrc="/Images/characters-full/1004.png">
        </BannerInfoCard>
    </MudItem>
    <MudItem xs="12" sm="12" md="6" lg="6">
        <BannerInfoCard 
            BannerInfo="@CurrentBannerInfos.First(b => b.BannerTypeId == (int)BannerTypeEnum.DEPARTURE)"
            ImageSrc="/Images/characters-full/trailblazer.png">
        </BannerInfoCard>
    </MudItem>
</MudGrid>

@code {

    [CascadingParameter]
    List<Shared.Profile> profiles { get; set; }

    private List<UserBannerInfo> defaultInfos = UserBannerInfo.CreateDefaultBannerInfos();
    
    public List<UserBannerInfo> CurrentBannerInfos => GetCurrentBannerInfos() ;


    private List<UserBannerInfo> GetCurrentBannerInfos()
    {
        if( (profiles?.Count ?? 0) == 0 || (profiles?[0]?.UserBannerInfos?.Count ?? 0) == 0 ){
            return defaultInfos;
        }
        else{
            return profiles[0].UserBannerInfos.ToList();
        }
    }
    
}
